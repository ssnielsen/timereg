{% load staticfiles %}

<html>
<head>
  <link rel="stylesheet" type="text/css" href="{% static "bootstrap/css/bootstrap.css" %}">
  <link rel="stylesheet" type="text/css" href="{% static "css/custom.css" %}">
</head>
<body ng-app="freelancrApp">
  <div class="content" ng-controller="AppController">
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Freelancr</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="#">Home</a></li>
          </ul>
        </div>
      </div>
    </nav>


    {% verbatim %}
    <!--Content-->
    <div class="container">
      <div class="row content-area">
        <!--Search area-->
        <div class="col-md-2">
          <input class="form-control imput" type="text" ng-model="query" placeholder="Search customers...">
          <table class="table table-hover customer-table">
            <tr ng-click="selectCustomer(customer)" ng-repeat="customer in customers | filter:query">
              <td >{{ customer.name }}</td>
            </tr>
          </table>
        </div>
        
        <!--Detail area-->
        <div class="col-md-10" ng-model="selectedCustomer">
          <h2>{{ selectedCustomer.name }} <small>{{ selectedCustomer.totalHours }} hours</small></h2>
          <div>{{ selectedCustomer.street }}</div>
          <div>{{ selectedCustomer.phone }}</div>
          <br>
          <button type="button" class="btn btn-default" ng-click="addProject()">Add project</button>
          <br>
          <div ng-repeat="project in selectedCustomerProjects">
            <h4>{{ project.name }} <small>{{ project.totalHours }} hours</small><h4>
              <table class="table table-condensed table-activity">
                <thead>
                  <th class="col-sm-2">Date</th>
                  <th class="col-sm-4">Description</th>
                  <th style="width:auto">Rate</th>
                  <th style="width:auto">Duration</th>
                  <th style="width:auto">Billed</th>
                  <th style="width:auto">Payed</th>
                  <th class="col-sm-2"></th>
                </thead>
                <tr ng-repeat="activity in project.activities">
                  <td>{{ activity.date }}</td>
                  <td>{{ activity.description }}</td>
                  <td>{{ activity.rate }}</td>
                  <td>{{ activity.duration }}</td>
                  <td>{{ activity.billed | bool }}</td>
                  <td>{{ activity.payed | bool}}</td>
                  <td>
                    <div class="btn-group btn-group-xs" aria-label="...">
                      <button type="button" class="btn btn-default btn-xs" ng-click="editActivityModal(activity)">Edit</button>
                      <button type="button" class="btn btn-default btn-xs" ng-click="deleteActivity(activity)">Delete</button>
                    </div>
                  </td>
                </tr>
                <tr ng-controller="AddController">
                  <td>
                    <input type="text" class="form-control input input-xs" datepicker-popup="{{format}}" ng-click="openDatePicker($event)" ng-model="date" is-open="opened" close-text="Close"/>
                  </td>
                  <td><input class="form-control input input-xs" type="text" ng-model="description"></td>
                  <td><input class="form-control input input-xs" type="text" ng-model="rate"></td>
                  <td><input class="form-control input input-xs" type="text" ng-model="duration"></td>
                  <td><input type="checkbox" ng-model="billed"></td>
                  <td><input type="checkbox" ng-model="payed"></td>
                  <td><button type="submit" class="btn btn-default btn-xs" ng-click="addActivity(project)">Add</button></td>
                </tr>
              </table>
            </div>
          </div>  
        </div>
      </div>

      <script type="text/ng-template" id="addProjectModal.html">
      <div class="modal-header">
      <h3 class="modal-title">Add Project</h3>
      </div>
      <div class="modal-body">
      <form class="form-horizontal">
      <fieldset>
    
      <div class="form-group">
      <label class="col-md-4 control-label" for="name">Project Name</label>  
      <div class="col-md-4">
      <input id="name" name="name" type="text" class="form-control input-md" ng-model="name" required="">
      </div>
      </div>

      </fieldset>
      </form>
      </div>
      <div class="modal-footer">
      <button class="btn btn-primary" ng-click="addProject()">Done</button>
      <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
      </div>
      </script>

      <script type="text/ng-template" id="editActivityModal.html">
      <div class="modal-header">
      <h3 class="modal-title">Edit Activity</h3>
      </div>
      <div class="modal-body">
      <form class="form-horizontal">
      <fieldset>
      <div class="form-group">
      <label class="col-md-4 control-label" for="date">Date</label>  
      <div class="col-md-4">
      <input id="date" name="date" type="text" class="form-control input-md" ng-model="date" required="">
      </div>
      </div>

      <div class="form-group">
      <label class="col-md-4 control-label" for="description">Description</label>  
      <div class="col-md-4">
      <input id="description" name="description" type="text" class="form-control input-md" ng-model="description" required="">
      </div>
      </div>

      <div class="form-group">
      <label class="col-md-4 control-label" for="rate">Rate</label>  
      <div class="col-md-4">
      <input id="rate" name="rate" type="text" class="form-control input-md" ng-model="rate" required="">
      </div>
      </div>

      <div class="form-group">
      <label class="col-md-4 control-label" for="duration">Duration</label>  
      <div class="col-md-4">
      <input id="duration" name="duration" type="text" class="form-control input-md" ng-model="duration" required="">
      </div>
      </div>

      <div class="form-group">
      <label class="col-md-4 control-label" for="billed">Billed</label>  
      <div class="col-md-4">
      <input id="billed" name="billed" type="checkbox" class="form-control input-md" ng-model="billed" required="">
      </div>
      </div>

      <div class="form-group">
      <label class="col-md-4 control-label" for="payed">Payed</label>  
      <div class="col-md-4">
      <input id="payed" name="payed" type="checkbox" class="form-control input-md" ng-model="payed" required="">
      </div>
      </div>

      </fieldset>
      </form>
      </div>
      <div class="modal-footer">
      <button class="btn btn-primary" ng-click="editActivity()">Done</button>
      <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
      </div>
      </script>
    </div>
    {% endverbatim %}
  </div>


  <script src="{% static "jquery/jquery-2.1.1.js" %}"></script>
  <script src="{% static "angular/angular.js" %}"></script>
  <script src="{% static "angular/angular-cookies.js" %}"></script>
  <script src="{% static "angular/angular-resource.js" %}"></script>
  <script src="{% static "angular/ui-bootstrap-tpls-0.12.0.js" %}"></script>
  <script src="{% static "js/controllers.js" %}"></script>
</body>
</html>